# 캘린더 프로젝트 테스트 전략 (요약)

> 단위·통합 테스트는 현행 유지, **E2E 테스트**로 보강한다. 시각 회귀(VRT)는 범위에서 제외.

---

## 1. 테스트 피라미드 목표 비율

| 유형                 | 목표 비중 | 목적                                 |
| -------------------- | --------- | ------------------------------------ |
| Unit (훅·유틸리티)   | 40 %      | 비즈니스 규칙을 빠르게 검증          |
| Integration (플로우) | 40 %      | 폼 → 훅 → 상태 → UI 데이터 흐름 보장 |
| **E2E**              | **20 %**  | 실제 사용자 시나리오 보호            |
| Visual Regression    | ✖︎        | 이번 범위에서 제외                   |

---

## 2. E2E 테스트 설계

### 2-1 도구

- **Playwright** (멀티 브라우저·모바일·네트워크 시뮬레이션 지원)
- 기존 MSW 핸들러 재사용 → 외부 API 의존 제거

### 2-2 핵심 시나리오 4선

| ID     | 사용자 여정                    | 핵심 검증                                                   |
| ------ | ------------------------------ | ----------------------------------------------------------- |
| E2E-01 | **단일 일정 CRUD**             | 생성 → 목록 반영 → 수정 → 삭제까지 정상 동작                |
| E2E-02 | **월간 반복 일정 + 충돌 모달** | 겹치는 일정 생성 시 모달 노출 → 확인 후 모든 반복 일정 생성 |
| E2E-03 | **알림 시간 도래**             | 가상 타이머로 1분 뒤 알림 → 배지/토스트 표시 & 중복 없음    |
| E2E-04 | **검색 조합**                  | 키워드 적용 → 결과 하이라이트 및 개수 일치                  |

> 실패 시 자동 스크린샷/비디오 → CI 아티팩트로 제공

---

## 3. 기능별 현재 커버리지 & 잔여 과제

| 기능 영역           | 복잡도 | 현행 단위·통합 커버리지                | 남은 리스크                    | 필요한 추가 테스트            |
| ------------------- | ------ | -------------------------------------- | ------------------------------ | ----------------------------- |
| 반복 일정 생성·수정 | High   | ✅ 단위 (repeatUtils) \| ✅ 통합 일부  | 월말·윤년 엣지, 기존 일정 회귀 | 통합(경계값)·회귀·E2E-02      |
| 이벤트 충돌 감지    | High   | ✅ 단위 (eventOverlap) \| ✅ 통합 일부 | 다중 충돌, 반복↔︎단일 충돌     | 경계값 통합                   |
| 실시간 알림         | High   | ✅ 훅 단위 일부                        | 타이머 동기화, 중복 알림       | 가상 타이머 통합 · **E2E-03** |
| 검색·필터           | Medium | ✅ 통합 일부                           | 조합 필터 정확도, 성능         | **E2E-04** · 성능 벤치        |
| 폼 / UI 피드백      | Medium | ⚠︎ 미흡                                | 오류 메시지, 포커스            | RTL 단위                      |

## 5. 작업 계획

1. **E2E 시나리오 4개 구현 (필수)**

   - E2E-01 단일 일정 CRUD
   - E2E-02 월간 반복 일정 + 충돌 모달
   - E2E-03 실시간 알림(가상 타이머)
   - E2E-04 검색·필터 조합

2. **CI 연동**

   - Playwright 테스트를 GitHub Actions에 추가
   - 실패 시 스크린샷·비디오 아티팩트 업로드 → 머지 차단

3. **후순위 개선(시간 여유 시)**
   - 반복·충돌 경계값 통합 테스트 보강
   - 폼 UI 오류 메시지 RTL 단위 테스트
   - 검색 성능 벤치마크 (대량 데이터)
